<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NadeSpot - Лучшие гранаты CS2</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
  <style>
    :root {
      --primary: #ff4500;
      --primary-dark: #e03d00;
      --secondary: #1a1a1a;
      --dark: #111;
      --light: #f5f5f5;
      --gray: #888;
      --card-bg: #1e1e1e;
      --card-hover: #252525;
      --danger: #dc3545;
      --danger-dark: #bd2130;
      --success: #28a745;
      --info: #17a2b8;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    body {
      background: var(--dark);
      color: var(--light);
      line-height: 1.6;
      overflow-x: hidden;
    }
    
    /* Навигация */
    nav {
      background: var(--secondary);
      padding: 15px 0;
      border-bottom: 2px solid var(--primary);
      position: sticky;
      top: 0;
      z-index: 100;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    }
    
    .nav-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }
    
    .logo {
      display: flex;
      align-items: center;
      font-size: 24px;
      font-weight: bold;
      color: var(--primary);
      text-decoration: none;
    }
    
    .logo i {
      margin-right: 10px;
      font-size: 28px;
    }
    
    .nav-links {
      display: flex;
      list-style: none;
    }
    
    .nav-links li {
      margin-left: 25px;
      position: relative;
    }
    
    .nav-links a {
      text-decoration: none;
      color: var(--light);
      font-weight: 600;
      transition: 0.3s;
      padding: 5px 0;
    }
    
    .nav-links a:hover,
    .nav-links a.active {
      color: var(--primary);
    }
    
    .nav-links a.active::after {
      content: '';
      position: absolute;
      bottom: -5px;
      left: 0;
      width: 100%;
      height: 2px;
      background: var(--primary);
    }
    
    /* Мобильное меню */
    .menu-toggle {
      display: none;
      flex-direction: column;
      justify-content: space-between;
      width: 30px;
      height: 21px;
      cursor: pointer;
    }
    
    .menu-toggle span {
      height: 3px;
      width: 100%;
      background-color: var(--light);
      border-radius: 3px;
      transition: all 0.3s;
    }
    
    /* Главный баннер */
    .hero {
      height: 500px;
      background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), 
                 url('https://images.unsplash.com/photo-1757923028479-821ade5e2aef?q=80&w=1057&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D') 
                 no-repeat center center/cover;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 0 20px;
    }
    
    .hero-content {
      max-width: 800px;
    }
    
    .hero-content h1 {
      font-size: 48px;
      margin-bottom: 20px;
      color: var(--primary);
      text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.8);
      animation: fadeInDown 1s;
    }
    
    .hero-content p {
      font-size: 20px;
      margin-bottom: 30px;
      color: #eee;
      animation: fadeInUp 1s;
    }
    
    .hero-buttons {
      display: flex;
      justify-content: center;
      gap: 15px;
      animation: fadeIn 1.5s;
    }
    
    .btn {
      display: inline-block;
      padding: 12px 30px;
      background: var(--primary);
      color: #fff;
      text-decoration: none;
      font-weight: bold;
      border-radius: 6px;
      transition: 0.3s;
      border: none;
      cursor: pointer;
    }
    
    .btn:hover {
      background: var(--primary-dark);
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(255, 69, 0, 0.4);
    }
    
    .btn-outline {
      background: transparent;
      border: 2px solid var(--primary);
      color: var(--primary);
    }
    
    .btn-outline:hover {
      background: var(--primary);
      color: #fff;
    }
    
    .btn-danger {
      background: var(--danger);
    }
    
    .btn-danger:hover {
      background: var(--danger-dark);
    }
    
    .btn-success {
      background: var(--success);
    }
    
    .btn-info {
      background: var(--info);
    }
    
    /* Уведомления */
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 15px 20px;
      border-radius: 5px;
      color: white;
      z-index: 1000;
      opacity: 0;
      transform: translateX(100%);
      transition: all 0.3s ease;
    }
    
    .notification.show {
      opacity: 1;
      transform: translateX(0);
    }
    
    .notification.error {
      background-color: var(--danger);
    }
    
    .notification.success {
      background-color: var(--success);
    }
    
    .notification.info {
      background-color: var(--info);
    }
    
    /* Секции */
    section {
      display: none;
      padding: 60px 20px;
      max-width: 1200px;
      margin: 0 auto;
    }
    
    section.active {
      display: block;
      animation: fadeIn 0.5s;
    }
    
    .section-title {
      text-align: center;
      font-size: 36px;
      margin-bottom: 40px;
      color: var(--light);
      position: relative;
      padding-bottom: 15px;
    }
    
    .section-title::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 80px;
      height: 4px;
      background: var(--primary);
      border-radius: 2px;
    }
    
    /* Поиск и фильтры */
    .search-filters {
      background: var(--card-bg);
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 30px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }
    
    .search-box {
      display: flex;
      margin-bottom: 15px;
    }
    
    .search-box input {
      flex: 1;
      padding: 12px;
      border: 1px solid #444;
      border-radius: 4px 0 0 4px;
      background: #2a2a2a;
      color: var(--light);
      font-size: 16px;
    }
    
    .search-box button {
      padding: 0 20px;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 0 4px 4px 0;
      cursor: pointer;
    }
    
    .advanced-filters {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
    }
    
    .filter-group {
      margin-bottom: 15px;
    }
    
    .filter-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: 500;
    }
    
    .filter-group select,
    .filter-group input {
      width: 100%;
      padding: 10px;
      border: 1px solid #444;
      border-radius: 4px;
      background: #2a2a2a;
      color: var(--light);
    }
    
    /* Сетка видео */
    .video-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 25px;
      margin-top: 30px;
    }
    
    .video-card {
      background: var(--card-bg);
      border-radius: 8px;
      overflow: hidden;
      transition: transform 0.3s, box-shadow 0.3s;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      position: relative;
    }
    
    .video-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
      background: var(--card-hover);
    }
    
    .video-actions {
      position: absolute;
      top: 10px;
      right: 10px;
      z-index: 5;
      display: flex;
      gap: 10px;
    }
    
    .video-card:hover .video-actions {
      display: flex;
    }
    
    .action-btn {
      background: rgba(0, 0, 0, 0.7);
      color: white;
      border: none;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: 0.3s;
    }
    
    .action-btn:hover {
      background: var(--primary);
      transform: scale(1.1);
    }
    
    .favorited {
      color: gold;
    }
    
    .video-thumb {
      height: 180px;
      background-color: #222;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }
    
    .video-thumb img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.3s;
    }
    
    .video-thumb:hover img {
      transform: scale(1.05);
    }
    
    .play-icon {
      position: absolute;
      font-size: 60px;
      color: rgba(255, 255, 255, 0.9);
      transition: 0.3s;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
    }
    
    .video-thumb:hover .play-icon {
      color: var(--primary);
      transform: scale(1.1);
    }
    
    .video-duration {
      position: absolute;
      bottom: 10px;
      right: 10px;
      background: rgba(0, 0, 0, 0.7);
      padding: 3px 8px;
      border-radius: 4px;
      font-size: 14px;
    }
    
    .video-info {
      padding: 15px;
    }
    
    .video-title {
      font-size: 18px;
      margin-bottom: 10px;
      font-weight: 600;
    }
    
    .video-meta {
      display: flex;
      justify-content: space-between;
      color: var(--gray);
      font-size: 14px;
      margin-bottom: 10px;
    }
    
    .video-stats {
      display: flex;
      justify-content: space-between;
      margin-top: 15px;
      color: var(--gray);
      font-size: 14px;
      border-top: 1px solid #333;
      padding-top: 15px;
    }
    
    .video-stat {
      display: flex;
      align-items: center;
    }
    
    .video-stat i {
      margin-right: 5px;
    }
    
    /* Категории */
    .categories {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 15px;
      margin-bottom: 30px;
    }
    
    .category-btn {
      padding: 8px 20px;
      background: var(--card-bg);
      color: var(--light);
      border: none;
      border-radius: 20px;
      cursor: pointer;
      transition: 0.3s;
    }
    
    .category-btn:hover,
    .category-btn.active {
      background: var(--primary);
    }
    
    /* Форма загрузки видео */
    .upload-form {
      background: var(--card-bg);
      padding: 30px;
      border-radius: 8px;
      max-width: 600px;
      margin: 0 auto;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }
    
    .form-group {
      margin-bottom: 20px;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
    }
    
    .form-control {
      width: 100%;
      padding: 12px;
      border: 1px solid #444;
      border-radius: 4px;
      background: #2a2a2a;
      color: var(--light);
      font-size: 16px;
    }
    
    .form-control:focus {
      outline: none;
      border-color: var(--primary);
    }
    
    textarea.form-control {
      min-height: 100px;
      resize: vertical;
    }
    
    .file-upload {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      border: 2px dashed #555;
      border-radius: 8px;
      padding: 20px;
      text-align: center;
      cursor: pointer;
      transition: 0.3s;
      margin-bottom: 20px;
    }
    
    .file-upload:hover {
      border-color: var(--primary);
    }
    
    .file-upload i {
      font-size: 40px;
      color: var(--primary);
      margin-bottom: 10px;
    }
    
    .upload-types {
      display: flex;
      gap: 15px;
      margin-bottom: 20px;
    }
    
    .upload-type-btn {
      flex: 1;
      padding: 12px;
      background: #2a2a2a;
      border: 1px solid #444;
      border-radius: 6px;
      color: var(--light);
      cursor: pointer;
      transition: 0.3s;
    }
    
    .upload-type-btn.active {
      background: var(--primary);
      border-color: var(--primary);
    }
    
    /* Коллекции */
    .collections-container {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 25px;
      margin-top: 30px;
    }
    
    .collection-card {
      background: var(--card-bg);
      border-radius: 8px;
      overflow: hidden;
      transition: transform 0.3s, box-shadow 0.3s;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      position: relative;
      cursor: pointer;
    }
    
    .collection-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
    }
    
    /* Стили для кнопки удаления коллекции */
    .collection-actions {
      position: absolute;
      top: 10px;
      right: 10px;
      display: flex;
      gap: 10px;
      z-index: 5;
      opacity: 0;
      transition: opacity 0.3s;
    }
    
    .collection-card:hover .collection-actions {
      opacity: 1;
    }
    
    .collection-action-btn {
      background: rgba(0, 0, 0, 0.7);
      color: white;
      border: none;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: 0.3s;
    }
    
    .collection-action-btn:hover {
      background: var(--danger);
      transform: scale(1.1);
    }
    
    .collection-thumb {
      height: 150px;
      background-color: #222;
      position: relative;
      overflow: hidden;
    }
    
    .collection-thumb img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .collection-count {
      position: absolute;
      top: 10px;
      right: 10px;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      padding: 5px 10px;
      border-radius: 20px;
      font-size: 12px;
    }
    
    .collection-info {
      padding: 15px;
    }
    
    .collection-title {
      font-size: 18px;
      margin-bottom: 10px;
      font-weight: 600;
    }
    
    .collection-desc {
      color: var(--gray);
      font-size: 14px;
      margin-bottom: 15px;
    }
    
    .collection-meta {
      display: flex;
      justify-content: space-between;
      color: var(--gray);
      font-size: 12px;
    }
    
    /* Панель администратора */
    .admin-panel {
      background: var(--card-bg);
      padding: 30px;
      border-radius: 8px;
      max-width: 800px;
      margin: 0 auto;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }
    
    .admin-video-list {
      margin-top: 20px;
    }
    
    .admin-video-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px;
      border-bottom: 1px solid #333;
    }
    
    .admin-video-item:last-child {
      border-bottom: none;
    }
    
    .admin-video-info {
      flex: 1;
    }
    
    .admin-video-title {
      font-weight: 600;
      margin-bottom: 5px;
    }
    
    .admin-video-meta {
      font-size: 14px;
      color: var(--gray);
    }
    
    /* 3D просмотр */
    .viewer-3d {
      width: 100%;
      height: 400px;
      background: #2a2a2a;
      border-radius: 8px;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
    }
    
    .viewer-controls {
      position: absolute;
      bottom: 15px;
      left: 15px;
      display: flex;
      gap: 10px;
    }
    
    .viewer-controls button {
      background: rgba(0, 0, 0, 0.7);
      color: white;
      border: none;
      border-radius: 4px;
      padding: 8px 12px;
      cursor: pointer;
      transition: 0.3s;
    }
    
    .viewer-controls button:hover {
      background: var(--primary);
    }
    
    .viewer-info {
      position: absolute;
      top: 15px;
      left: 15px;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      padding: 10px 15px;
      border-radius: 4px;
      font-size: 14px;
    }
    
    /* Модальное окно видео */
    .video-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.9);
      z-index: 1000;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    
    .video-modal.active {
      display: flex;
      animation: fadeIn 0.3s;
    }
    
    .modal-content {
      background: var(--card-bg);
      width: 100%;
      max-width: 900px;
      border-radius: 8px;
      overflow: hidden;
      position: relative;
    }
    
    .modal-close {
      position: absolute;
      top: 15px;
      right: 15px;
      background: rgba(0, 0, 0, 0.7);
      color: #fff;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 10;
      font-size: 20px;
      transition: background 0.3s;
    }
    
    .modal-close:hover {
      background: var(--primary);
    }
    
    .modal-video-container {
      width: 100%;
      position: relative;
      padding-top: 56.25%; /* 16:9 Aspect Ratio */
    }
    
    .modal-video {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: none;
    }
    
    .modal-body {
      padding: 20px;
    }
    
    .modal-title {
      font-size: 24px;
      margin-bottom: 10px;
    }
    
    .modal-meta {
      display: flex;
      justify-content: space-between;
      color: var(--gray);
      margin-bottom: 15px;
    }
    
    .modal-description {
      margin-bottom: 20px;
      line-height: 1.6;
    }
    
    .modal-stats {
      display: flex;
      justify-content: space-between;
      color: var(--gray);
      border-top: 1px solid #333;
      padding-top: 15px;
    }
    
    /* Модальное окно подтверждения удаления */
    .confirm-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      z-index: 2000;
      align-items: center;
      justify-content: center;
    }
    
    .confirm-modal.active {
      display: flex;
    }
    
    .confirm-content {
      background: var(--card-bg);
      padding: 30px;
      border-radius: 8px;
      max-width: 500px;
      width: 100%;
      text-align: center;
    }
    
    .confirm-buttons {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-top: 20px;
    }
    
    /* О сайте */
    .about-content {
      background: var(--card-bg);
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }
    
    .about-content p {
      margin-bottom: 20px;
      line-height: 1.8;
    }
    
    .features {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 30px;
    }
    
    .feature {
      text-align: center;
      padding: 20px;
      background: #252525;
      border-radius: 8px;
      transition: 0.3s;
    }
    
    .feature:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
    }
    
    .feature i {
      font-size: 40px;
      color: var(--primary);
      margin-bottom: 15px;
    }
    
    .feature h3 {
      margin-bottom: 10px;
      color: var(--primary);
    }
    
    /* Футер */
    footer {
      background: var(--secondary);
      padding: 40px 20px;
      text-align: center;
      margin-top: 60px;
      border-top: 2px solid var(--primary);
    }
    
    .footer-content {
      max-width: 1200px;
      margin: 0 auto;
    }
    
    .social-links {
      display: flex;
      justify-content: center;
      margin: 20px 0;
    }
    
    .social-links a {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: #333;
      color: var(--light);
      margin: 0 10px;
      transition: 0.3s;
    }
    
    .social-links a:hover {
      background: var(--primary);
      transform: translateY(-3px);
    }
    
    .copyright {
      color: var(--gray);
      margin-top: 20px;
    }
    
    /* Анимации */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes fadeInDown {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    /* Адаптивность */
    @media (max-width: 768px) {
      .menu-toggle {
        display: flex;
      }
      
      .nav-links {
        position: fixed;
        top: 72px;
        left: -100%;
        width: 80%;
        height: calc(100vh - 72px);
        background: var(--secondary);
        flex-direction: column;
        padding: 20px;
        transition: 0.3s;
      }
      
      .nav-links.active {
        left: 0;
      }
      
      .nav-links li {
        margin: 15px 0;
      }
      
      .hero-content h1 {
        font-size: 36px;
      }
      
      .hero-content p {
        font-size: 18px;
      }
      
      .hero-buttons {
        flex-direction: column;
      }
      
      .video-grid {
        grid-template-columns: 1fr;
      }
      
      .collections-container {
        grid-template-columns: 1fr;
      }
      
      .upload-types {
        flex-direction: column;
      }
      
      .advanced-filters {
        grid-template-columns: 1fr;
      }
      
      .admin-video-item {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .admin-video-item .btn {
        margin-top: 10px;
        align-self: flex-end;
      }
      
      .viewer-3d {
        height: 300px;
      }
    }
  </style>
</head>
<body>

  <!-- Навигация -->
  <nav>
    <div class="nav-container">
      <a href="#" class="logo" onclick="showSection('home'); return false;">
        <i class="fas fa-bomb"></i>
        <span>NadeSpot</span>
      </a>
      
      <div class="menu-toggle" id="menu-toggle">
        <span></span>
        <span></span>
        <span></span>
      </div>
      
      <ul class="nav-links" id="nav-links">
        <li><a href="#" class="active" onclick="showSection('home'); return false;">Главная</a></li>
        <li><a href="#" onclick="showSection('videos'); return false;">Видео</a></li>
        <li><a href="#" onclick="showSection('collections'); return false;">Коллекции</a></li>
        <li><a href="#" onclick="showSection('upload'); return false;">Загрузить</a></li>
        <li><a href="#" onclick="showSection('admin'); return false;">Управление</a></li>
        <li><a href="#" onclick="showSection('about'); return false;">О сайте</a></li>
      </ul>
    </div>
  </nav>

  <!-- Уведомления -->
  <div class="notification" id="notification"></div>

  <!-- Главная -->
  <section id="home" class="active">
    <div class="hero">
      <div class="hero-content">
        <h1 class="animate__animated animate__fadeInDown">Лучшие гранаты в CS2</h1>
        <p class="animate__animated animate__fadeInUp">Изучайте, практикуйте и совершенствуйте свои навыки владения гранатами</p>
        <div class="hero-buttons">
          <a href="#" class="btn" onclick="showSection('videos'); return false;">Смотреть гранаты</a>
          <a href="#" class="btn btn-outline" onclick="showSection('upload'); return false;">Загрузить видео</a>
        </div>
      </div>
    </div>
  </section>

  <!-- Видео -->
  <section id="videos">
    <h2 class="section-title">Популярные гранаты</h2>
    
    <div class="search-filters">
      <div class="search-box">
        <input type="text" id="search-input" placeholder="Поиск по названию, карте или описанию...">
        <button onclick="searchVideos()"><i class="fas fa-search"></i></button>
      </div>
      
      <div class="advanced-filters">
        <div class="filter-group">
          <label for="filter-category">Категория</label>
          <select id="filter-category" onchange="filterVideos()">
            <option value="all">Все категории</option>
            <option value="smoke">Дымовые</option>
            <option value="flash">Светошумовые</option>
            <option value="molotov">Зажигательные</option>
            <option value="he">Осколочные</option>
          </select>
        </div>
        
        <div class="filter-group">
          <label for="filter-map">Карта</label>
          <select id="filter-map" onchange="filterVideos()">
            <option value="all">Все карты</option>
            <option value="Mirage">Mirage</option>
            <option value="Dust2">Dust II</option>
            <option value="Inferno">Inferno</option>
            <option value="Nuke">Nuke</option>
            <option value="Overpass">Overpass</option>
            <option value="Vertigo">Vertigo</option>
            <option value="Ancient">Ancient</option>
          </select>
        </div>
        
        <div class="filter-group">
          <label for="filter-side">Сторона</label>
          <select id="filter-side" onchange="filterVideos()">
            <option value="all">Обе стороны</option>
            <option value="CT">Контр-террористы</option>
            <option value="T">Террористы</option>
          </select>
        </div>
        
        <div class="filter-group">
          <label for="filter-sort">Сортировка</label>
          <select id="filter-sort" onchange="filterVideos()">
            <option value="newest">Сначала новые</option>
            <option value="oldest">Сначала старые</option>
            <option value="popular">По популярности</option>
            <option value="rating">По рейтингу</option>
          </select>
        </div>
      </div>
    </div>
    
    <div class="categories">
      <button class="category-btn active" data-filter="all">Все</button>
      <button class="category-btn" data-filter="smoke">Дымовые</button>
      <button class="category-btn" data-filter="flash">Светошумовые</button>
      <button class="category-btn" data-filter="molotov">Зажигательные</button>
      <button class="category-btn" data-filter="he">Осколочные</button>
    </div>
    
    <div class="video-grid" id="video-container">
      <!-- Видео будут добавляться динамически -->
    </div>
  </section>

  <!-- Коллекции -->
  <section id="collections">
    <h2 class="section-title">Мои коллекции</h2>
    
    <div class="hero-buttons" style="justify-content: center; margin-bottom: 30px;">
      <button class="btn" onclick="createNewCollection()">
        <i class="fas fa-plus"></i> Создать коллекцию
      </button>
      <button class="btn btn-info" onclick="showSection('favorites')">
        <i class="fas fa-star"></i> Избранное
      </button>
    </div>
    
    <div class="collections-container" id="collections-container">
      <!-- Коллекции будут добавляться динамически -->
    </div>
  </section>

  <!-- Избранное -->
  <section id="favorites">
    <h2 class="section-title">Избранные гранаты</h2>
    
    <div class="video-grid" id="favorites-container">
      <!-- Избранные видео будут добавляться динамически -->
    </div>
  </section>

  <!-- Загрузка видео -->
  <section id="upload">
    <h2 class="section-title">Загрузить видео</h2>
    
    <div class="upload-form">
      <div class="upload-types">
        <button class="upload-type-btn active" data-type="file">Файл видео</button>
        <button class="upload-type-btn" data-type="youtube">YouTube ссылка</button>
      </div>
      
      <div id="file-upload-section">
        <div class="file-upload" id="drop-zone">
          <i class="fas fa-cloud-upload-alt"></i>
          <p>Перетащите видеофайл сюда или</p>
          <label for="video-file" class="btn">Выбрать файл</label>
          <input type="file" id="video-file" accept="video/*" style="display: none;">
        </div>
      </div>
      
      <div id="youtube-upload-section" style="display: none;">
        <div class="form-group">
          <label for="youtube-url">Ссылка на YouTube видео</label>
          <input type="url" id="youtube-url" class="form-control" placeholder="https://www.youtube.com/watch?v=...">
        </div>
      </div>
      
      <div class="form-group">
        <label for="video-title">Название видео</label>
        <input type="text" id="video-title" class="form-control" placeholder="Введите название видео">
      </div>
      
      <div class="form-group">
        <label for="video-category">Категория гранаты</label>
        <select id="video-category" class="form-control">
          <option value="">Выберите категорию</option>
          <option value="smoke">Дымовая</option>
          <option value="flash">Светошумовая</option>
          <option value="molotov">Зажигательная</option>
          <option value="he">Осколочная</option>
        </select>
      </div>
      
      <div class="form-group">
        <label for="video-map">Карта</label>
        <input type="text" id="video-map" class="form-control" placeholder="Например: Mirage, Dust2">
      </div>
      
      <div class="form-group">
        <label for="video-side">Сторона</label>
        <select id="video-side" class="form-control">
          <option value="">Выберите сторону</option>
          <option value="CT">Контр-террористы</option>
          <option value="T">Террористы</option>
          <option value="both">Обе стороны</option>
        </select>
      </div>
      
      <div class="form-group">
        <label for="video-difficulty">Сложность</label>
        <select id="video-difficulty" class="form-control">
          <option value="">Выберите сложность</option>
          <option value="easy">Легкая</option>
          <option value="medium">Средняя</option>
          <option value="hard">Сложная</option>
        </select>
      </div>
      
      <div class="form-group">
        <label for="video-description">Описание</label>
        <textarea id="video-description" class="form-control" placeholder="Опишите свой заброс"></textarea>
      </div>
      
      <button class="btn" style="width: 100%;" onclick="uploadVideo()">Загрузить видео</button>
    </div>
  </section>

  <!-- Панель администратора -->
  <section id="admin">
    <h2 class="section-title">Управление видео</h2>
    
    <div class="admin-panel">
      <p>Здесь вы можете управлять загруженными видео. Для удаления видео нажмите на кнопку "Удалить".</p>
      
      <div class="admin-video-list" id="admin-video-list">
        <!-- Список видео для управления -->
      </div>
    </div>
  </section>

  <!-- 3D просмотр -->
  <section id="view3d">
    <h2 class="section-title">3D Просмотр траектории</h2>
    
    <div class="viewer-3d" id="viewer-3d">
      <div class="viewer-info">
        <i class="fas fa-vr-cardboard"></i> Используйте мышь для вращения и колесо для масштабирования
      </div>
      <div class="viewer-controls">
        <button onclick="changeView('top')"><i class="fas fa-download"></i> Вид сверху</button>
        <button onclick="changeView('side')"><i class="fas fa-arrows-alt-h"></i> Вид сбоку</button>
        <button onclick="changeView('first')"><i class="fas fa-eye"></i> От первого лица</button>
      </div>
      <canvas id="nade-canvas" width="800" height="400"></canvas>
    </div>
    
    <div class="video-info">
      <h3 class="video-title" id="viewer-title">Траектория дымовой гранаты на Мираж</h3>
      <div class="video-meta">
        <span>Дымовая граната • Mirage</span>
        <span>CT сторона</span>
      </div>
      <p>Заброс из spawn точки CT в окно на середину карты. Позволяет заблокировать обзор противнику в начале раунда.</p>
      <div class="video-stats">
        <div class="video-stat">
          <i class="fas fa-bullseye"></i>
          <span>Точность: 95%</span>
        </div>
        <div class="video-stat">
          <i class="fas fa-clock"></i>
          <span>Время полета: 3.2с</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Модальное окно видео -->
  <div class="video-modal" id="video-modal">
    <div class="modal-content">
      <div class="modal-close" onclick="closeVideo()">
        <i class="fas fa-times"></i>
      </div>
      <div class="modal-video-container" id="modal-video-container">
        <!-- Видео будет вставлено сюда -->
      </div>
      <div class="modal-body">
        <h3 class="modal-title" id="modal-title"></h3>
        <div class="modal-meta">
          <span id="modal-category"></span>
          <span id="modal-date"></span>
        </div>
        <p class="modal-description" id="modal-description"></p>
        <div class="modal-stats">
          <div class="video-stat">
            <i class="far fa-eye"></i>
            <span id="modal-views">0</span>
          </div>
          <div class="video-stat">
            <i class="far fa-thumbs-up"></i>
            <span id="modal-likes">0</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Модальное окно подтверждения удаления -->
  <div class="confirm-modal" id="confirm-modal">
    <div class="confirm-content">
      <h3 id="confirm-title">Подтверждение удаления</h3>
      <p id="confirm-message">Вы уверены, что хотите удалить эту коллекцию? Это действие нельзя отменить.</p>
      <div class="confirm-buttons">
        <button class="btn btn-danger" id="confirm-yes">Да, удалить</button>
        <button class="btn" id="confirm-no">Отмена</button>
      </div>
    </div>
  </div>

  <!-- О сайте -->
  <section id="about">
    <h2 class="section-title">О сайте</h2>
    
    <div class="about-content">
      <p>
        NadeSpot — это платформа для изучения и применениями гранат в Counter-Strike 2. 
        Наша цель — помочь игрокам улучшить свои навыки и тактическое мышление.
      </p>
      
      <p>
        Здесь вы найдете тщательно отобранные видео с эффективными применениями гранат на всех популярных картах. 
        Наша команда модераторов проверяет каждый материал перед публикацией.
      </p>
      
      <div class="features">
        <div class="feature">
          <i class="fas fa-filter"></i>
          <h3>Качественный контент</h3>
          <p>Все видео проверяются на эффективность и актуальность</p>
        </div>
        
        <div class="feature">
          <i class="fas fa-sort-amount-down"></i>
          <h3>Удобная категоризация</h3>
          <p>Гранаты отсортированы по типам и картам для быстрого поиска</p>
        </div>
        
        <div class="feature">
          <i class="fas fa-map-marked-alt"></i>
          <h3>Все карты CS2</h3>
          <p>Гранаты для всех официальных и карт</p>
        </div>
        
        <div class="feature">
          <i class="fas fa-rocket"></i>
          <h3>Актуальные стратегии</h3>
          <p>Мы регулярно обновляем коллекцию под текущую мету игры</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Футер -->
  <footer>
    <div class="footer-content">
      <div class="logo">
        <i class="fas fa-bomb"></i>
        <span>NadeSpot</span>
      </div>
      
      <div class="social-links">
        <a href="#"><i class="fab fa-youtube"></i></a>
        <a href="#"><i class="fab fa-discord"></i></a>
      </div>
      
      <p class="copyright">NadeSpot © 2025 - Все права защищены</p>
      <p class="copyright">Это демонстрационный сайт, созданный в образовательных целях</p>
    </div>
  </footer>

  <script>
    // Хранилище для видео
    let videos = JSON.parse(localStorage.getItem('nadespot_videos')) || [];
    let collections = JSON.parse(localStorage.getItem('nadespot_collections')) || [];
    let favorites = JSON.parse(localStorage.getItem('nadespot_favorites')) || [];
    let currentUploadType = 'file';
    let isAdminMode = false;
    let currentCollectionToDelete = null;
    
    // Показать уведомление
    function showNotification(message, type = 'success') {
      const notification = document.getElementById('notification');
      notification.textContent = message;
      notification.className = `notification ${type} show`;
      
      setTimeout(() => {
        notification.classList.remove('show');
      }, 3000);
    }
    
    // Проверка на дубликаты
    function isDuplicateVideo(videoData) {
      return videos.some(video => {
        // Для YouTube видео проверяем ID
        if (videoData.type === 'youtube' && video.type === 'youtube') {
          return video.src === videoData.src;
        }
        
        // Для файлов проверяем название и категорию
        if (videoData.type === 'file' && video.type === 'file') {
          return video.title === videoData.title && video.category === videoData.category;
        }
        
        return false;
      });
    }
    
    // Показать/скрыть секции
    function showSection(id) {
      document.querySelectorAll("section").forEach(sec => sec.classList.remove("active"));
      document.getElementById(id).classList.add("active");
      
      document.querySelectorAll("nav a").forEach(a => a.classList.remove("active"));
      event.target.classList.add("active");
      
      // Прокрутка наверх
      window.scrollTo(0, 0);
      
      // Если открываем раздел с видео, отображаем их
      if (id === 'videos') {
        isAdminMode = false;
        renderVideos();
      } else if (id === 'admin') {
        isAdminMode = true;
        renderAdminPanel();
      } else if (id === 'collections') {
        renderCollections();
      } else if (id === 'favorites') {
        renderFavorites();
      } else if (id === 'view3d') {
        init3DViewer();
      }
    }
    
    // Мобильное меню
    document.getElementById('menu-toggle').addEventListener('click', function() {
      document.getElementById('nav-links').classList.toggle('active');
    });
    
    // Переключение типа загрузки
    document.querySelectorAll('.upload-type-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        document.querySelectorAll('.upload-type-btn').forEach(b => b.classList.remove('active'));
        this.classList.add('active');
        
        currentUploadType = this.getAttribute('data-type');
        
        document.getElementById('file-upload-section').style.display = 
          currentUploadType === 'file' ? 'block' : 'none';
        document.getElementById('youtube-upload-section').style.display = 
          currentUploadType === 'youtube' ? 'block' : 'none';
      });
    });
    
    // Загрузка файла
    document.getElementById('video-file').addEventListener('change', function(e) {
      if (e.target.files.length > 0) {
        const fileName = e.target.files[0].name;
        document.querySelector('#drop-zone p').textContent = `Выбран файл: ${fileName}`;
      }
    });
    
    // Drag and drop
    const dropZone = document.getElementById('drop-zone');
    
    dropZone.addEventListener('dragover', function(e) {
      e.preventDefault();
      this.style.borderColor = 'var(--primary)';
      this.style.backgroundColor = 'rgba(255, 69, 0, 0.1)';
    });
    
    dropZone.addEventListener('dragleave', function() {
      this.style.borderColor = '#555';
      this.style.backgroundColor = 'transparent';
    });
    
    dropZone.addEventListener('drop', function(e) {
      e.preventDefault();
      this.style.borderColor = '#555';
      this.style.backgroundColor = 'transparent';
      
      if (e.dataTransfer.files.length > 0) {
        const file = e.dataTransfer.files[0];
        if (file.type.startsWith('video/')) {
          document.getElementById('video-file').files = e.dataTransfer.files;
          document.querySelector('#drop-zone p').textContent = `Выбран файл: ${file.name}`;
        } else {
          showNotification('Пожалуйста, выберите видео файл', 'error');
        }
      }
    });
    
    // Загрузка видео
    function uploadVideo() {
      const title = document.getElementById('video-title').value;
      const category = document.getElementById('video-category').value;
      const map = document.getElementById('video-map').value;
      const side = document.getElementById('video-side').value;
      const difficulty = document.getElementById('video-difficulty').value;
      const description = document.getElementById('video-description').value;
      
      if (!title || !category) {
        showNotification('Пожалуйста, заполните обязательные поля: название и категория', 'error');
        return;
      }
      
      let videoData = {
        id: Date.now(),
        title,
        category,
        map,
        side,
        difficulty,
        description,
        date: new Date().toLocaleDateString('ru-RU'),
        views: 0,
        likes: 0,
        favorites: 0
      };
      
      if (currentUploadType === 'file') {
        const fileInput = document.getElementById('video-file');
        if (fileInput.files.length === 0) {
          showNotification('Пожалуйста, выберите видео файл', 'error');
          return;
        }
        
        const file = fileInput.files[0];
        const reader = new FileReader();
        
        reader.onload = function(e) {
          videoData.src = e.target.result;
          videoData.type = 'file';
          
          // Проверка на дубликаты
          if (isDuplicateVideo(videoData)) {
            showNotification('Такое видео уже существует!', 'error');
            return;
          }
          
          videos.push(videoData);
          saveVideos();
          showNotification('Видео успешно загружено!');
          resetForm();
          renderVideos();
        };
        
        reader.readAsDataURL(file);
      } else {
        const youtubeUrl = document.getElementById('youtube-url').value;
        if (!youtubeUrl) {
          showNotification('Пожалуйста, введите ссылку на YouTube видео', 'error');
          return;
        }
        
        // Преобразуем YouTube ссылку в embed формат
        let videoId = youtubeUrl.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/);
        
        if (videoId) {
          videoId = videoId[1];
          videoData.src = `https://www.youtube.com/embed/${videoId}`;
          videoData.type = 'youtube';
          
          // Проверка на дубликаты
          if (isDuplicateVideo(videoData)) {
            showNotification('Это YouTube видео уже добавлено!', 'error');
            return;
          }
          
          videos.push(videoData);
          saveVideos();
          showNotification('YouTube видео успешно добавлено!');
          resetForm();
          renderVideos();
        } else {
          showNotification('Некорректная ссылка на YouTube видео', 'error');
        }
      }
    }
    
    // Сохранение видео в localStorage
    function saveVideos() {
      localStorage.setItem('nadespot_videos', JSON.stringify(videos));
    }
    
    // Сохранение коллекций
    function saveCollections() {
      localStorage.setItem('nadespot_collections', JSON.stringify(collections));
    }
    
    // Сохранение избранного
    function saveFavorites() {
      localStorage.setItem('nadespot_favorites', JSON.stringify(favorites));
    }
    
    // Сброс формы
    function resetForm() {
      document.getElementById('video-title').value = '';
      document.getElementById('video-category').value = '';
      document.getElementById('video-map').value = '';
      document.getElementById('video-side').value = '';
      document.getElementById('video-difficulty').value = '';
      document.getElementById('video-description').value = '';
      document.getElementById('youtube-url').value = '';
      document.getElementById('video-file').value = '';
      document.querySelector('#drop-zone p').textContent = 'Перетащите видеофайл сюда или';
    }
    
    // Отображение видео
    function renderVideos() {
      const videoContainer = document.getElementById('video-container');
      videoContainer.innerHTML = '';
      
      if (videos.length === 0) {
        videoContainer.innerHTML = `
          <div style="grid-column: 1 / -1; text-align: center; padding: 40px;">
            <i class="fas fa-video-slash" style="font-size: 50px; color: #555; margin-bottom: 15px;"></i>
            <h3>Видео не найдены</h3>
            <p>Будьте первым, кто загрузит видео с гранатой!</p>
          </div>
        `;
        return;
      }
      
      videos.forEach(video => {
        const isFavorited = favorites.includes(video.id);
        
        const videoCard = document.createElement('div');
        videoCard.className = 'video-card';
        videoCard.setAttribute('data-category', video.category);
        videoCard.setAttribute('data-map', video.map || '');
        videoCard.setAttribute('data-side', video.side || '');
        videoCard.setAttribute('data-difficulty', video.difficulty || '');
        
        // Создаем превью для YouTube видео
        let thumbContent = '';
        if (video.type === 'youtube') {
          const videoId = video.src.split('/embed/')[1];
          thumbContent = `<img src="https://img.youtube.com/vi/${videoId}/hqdefault.jpg" alt="${video.title}">`;
        } else {
          thumbContent = `<img src="https://images.unsplash.com/photo-1542751371-adc38448a05e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80" alt="${video.title}">`;
        }
        
        videoCard.innerHTML = `
          <div class="video-actions">
            <button class="action-btn ${isFavorited ? 'favorited' : ''}" onclick="toggleFavorite(${video.id}, this)">
              <i class="fas fa-star"></i>
            </button>
            <button class="action-btn" onclick="addToCollection(${video.id})">
              <i class="fas fa-folder-plus"></i>
            </button>
          </div>
          <div class="video-thumb" onclick="openVideo(${video.id})">
            ${thumbContent}
            <div class="play-icon"><i class="fas fa-play"></i></div>
            <div class="video-duration">2:15</div>
          </div>
          <div class="video-info">
            <h3 class="video-title">${video.title}</h3>
            <div class="video-meta">
              <span>${getCategoryName(video.category)}</span>
              <span>${video.map || 'Не указана'}</span>
            </div>
            <p>${video.description || 'Описание отсутствует'}</p>
            <div class="video-stats">
              <div class="video-stat">
                <i class="far fa-eye"></i>
                <span>${video.views}</span>
              </div>
              <div class="video-stat">
                <i class="far fa-thumbs-up"></i>
                <span>${video.likes}</span>
              </div>
              <div class="video-stat">
                <i class="fas fa-star"></i>
                <span>${video.favorites || 0}</span>
              </div>
            </div>
          </div>
        `;
        
        videoContainer.appendChild(videoCard);
      });
    }
    
    // Поиск видео
    function searchVideos() {
      const searchTerm = document.getElementById('search-input').value.toLowerCase();
      const videoCards = document.querySelectorAll('.video-card');
      
      videoCards.forEach(card => {
        const title = card.querySelector('.video-title').textContent.toLowerCase();
        const description = card.querySelector('p').textContent.toLowerCase();
        const map = card.getAttribute('data-map').toLowerCase();
        
        if (title.includes(searchTerm) || description.includes(searchTerm) || map.includes(searchTerm)) {
          card.style.display = 'block';
        } else {
          card.style.display = 'none';
        }
      });
    }
    
    // Фильтрация видео
    function filterVideos() {
      const category = document.getElementById('filter-category').value;
      const map = document.getElementById('filter-map').value;
      const side = document.getElementById('filter-side').value;
      const sort = document.getElementById('filter-sort').value;
      
      const videoCards = document.querySelectorAll('.video-card');
      
      videoCards.forEach(card => {
        const videoCategory = card.getAttribute('data-category');
        const videoMap = card.getAttribute('data-map');
        const videoSide = card.getAttribute('data-side');
        
        let show = true;
        
        if (category !== 'all' && videoCategory !== category) show = false;
        if (map !== 'all' && videoMap !== map) show = false;
        if (side !== 'all' && videoSide !== side) show = false;
        
        card.style.display = show ? 'block' : 'none';
      });
      
      // Сортировка
      // Здесь можно добавить логику сортировки
    }
    
    // Добавление в избранное
    function toggleFavorite(videoId, element) {
      const index = favorites.indexOf(videoId);
      
      if (index === -1) {
        // Добавляем в избранное
        favorites.push(videoId);
        element.classList.add('favorited');
        
        // Увеличиваем счетчик избранного у видео
        const video = videos.find(v => v.id === videoId);
        if (video) {
          video.favorites = (video.favorites || 0) + 1;
          saveVideos();
        }
        
        showNotification('Добавлено в избранное');
      } else {
        // Удаляем из избранного
        favorites.splice(index, 1);
        element.classList.remove('favorited');
        
        // Уменьшаем счетчик избранного у видео
        const video = videos.find(v => v.id === videoId);
        if (video && video.favorites > 0) {
          video.favorites -= 1;
          saveVideos();
        }
        
        showNotification('Удалено из избранного');
      }
      
      saveFavorites();
      
      // Если мы на странице избранного, перерисовываем
      if (document.getElementById('favorites').classList.contains('active')) {
        renderFavorites();
      }
    }
    
    // Отображение избранного
    function renderFavorites() {
      const favoritesContainer = document.getElementById('favorites-container');
      favoritesContainer.innerHTML = '';
      
      if (favorites.length === 0) {
        favoritesContainer.innerHTML = `
          <div style="grid-column: 1 / -1; text-align: center; padding: 40px;">
            <i class="far fa-star" style="font-size: 50px; color: #555; margin-bottom: 15px;"></i>
            <h3>Нет избранных видео</h3>
            <p>Добавляйте видео в избранное, чтобы легко находить их позже</p>
          </div>
        `;
        return;
      }
      
      videos.forEach(video => {
        if (favorites.includes(video.id)) {
          const videoCard = document.createElement('div');
          videoCard.className = 'video-card';
          
          // Создаем превью для YouTube видео
          let thumbContent = '';
          if (video.type === 'youtube') {
            const videoId = video.src.split('/embed/')[1];
            thumbContent = `<img src="https://img.youtube.com/vi/${videoId}/hqdefault.jpg" alt="${video.title}">`;
          } else {
            thumbContent = `<img src="https://images.unsplash.com/photo-1542751371-adc38448a05e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80" alt="${video.title}">`;
          }
          
          videoCard.innerHTML = `
            <div class="video-actions">
              <button class="action-btn favorited" onclick="toggleFavorite(${video.id}, this)">
                <i class="fas fa-star"></i>
              </button>
              <button class="action-btn" onclick="addToCollection(${video.id})">
                <i class="fas fa-folder-plus"></i>
              </button>
            </div>
            <div class="video-thumb" onclick="openVideo(${video.id})">
              ${thumbContent}
              <div class="play-icon"><i class="fas fa-play"></i></div>
              <div class="video-duration">2:15</div>
            </div>
            <div class="video-info">
              <h3 class="video-title">${video.title}</h3>
              <div class="video-meta">
                <span>${getCategoryName(video.category)}</span>
                <span>${video.map || 'Не указана'}</span>
              </div>
              <p>${video.description || 'Описание отсутствует'}</p>
              <div class="video-stats">
                <div class="video-stat">
                  <i class="far fa-eye"></i>
                  <span>${video.views}</span>
                </div>
                <div class="video-stat">
                  <i class="far fa-thumbs-up"></i>
                  <span>${video.likes}</span>
                </div>
                <div class="video-stat">
                  <i class="fas fa-star"></i>
                  <span>${video.favorites || 0}</span>
                </div>
              </div>
            </div>
          `;
          
          favoritesContainer.appendChild(videoCard);
        }
      });
    }
    
    // Создание новой коллекции
    function createNewCollection() {
      const name = prompt('Введите название коллекции:');
      if (!name) return;
      
      const newCollection = {
        id: Date.now(),
        name,
        description: '',
        videos: [],
        created: new Date().toLocaleDateString('ru-RU')
      };
      
      collections.push(newCollection);
      saveCollections();
      renderCollections();
      showNotification('Коллекция создана');
    }
    
    // Добавление видео в коллекцию
    function addToCollection(videoId) {
      if (collections.length === 0) {
        showNotification('Сначала создайте коллекцию', 'info');
        setTimeout(createNewCollection, 500);
        return;
      }
      
      let options = '<option value="">Выберите коллекцию</option>';
      collections.forEach(collection => {
        options += `<option value="${collection.id}">${collection.name}</option>`;
      });
      
      const collectionId = prompt(`Выберите коллекцию для добавления:\n${options}`);
      if (!collectionId) return;
      
      const collection = collections.find(c => c.id == collectionId);
      if (collection) {
        if (!collection.videos.includes(videoId)) {
          collection.videos.push(videoId);
          saveCollections();
          showNotification('Видео добавлено в коллекцию');
        } else {
          showNotification('Это видео уже в коллекции', 'info');
        }
      }
    }
    
    // Отображение коллекций
    function renderCollections() {
      const collectionsContainer = document.getElementById('collections-container');
      collectionsContainer.innerHTML = '';
      
      if (collections.length === 0) {
        collectionsContainer.innerHTML = `
          <div style="grid-column: 1 / -1; text-align: center; padding: 40px;">
            <i class="far fa-folder-open" style="font-size: 50px; color: #555; margin-bottom: 15px;"></i>
            <h3>Коллекций пока нет</h3>
            <p>Создайте свою первую коллекцию для организации видео</p>
          </div>
        `;
        return;
      }
      
      collections.forEach(collection => {
        const collectionCard = document.createElement('div');
        collectionCard.className = 'collection-card';
        
        // Получаем первое видео для превью
        let thumbSrc = 'https://images.unsplash.com/photo-1542751371-adc38448a05e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80';
        if (collection.videos.length > 0) {
          const firstVideo = videos.find(v => v.id === collection.videos[0]);
          if (firstVideo && firstVideo.type === 'youtube') {
            const videoId = firstVideo.src.split('/embed/')[1];
            thumbSrc = `https://img.youtube.com/vi/${videoId}/hqdefault.jpg`;
          }
        }
        
        collectionCard.innerHTML = `
          <div class="collection-actions">
            <button class="collection-action-btn" onclick="event.stopPropagation(); confirmDeleteCollection(${collection.id})">
              <i class="fas fa-trash"></i>
            </button>
          </div>
          <div class="collection-thumb">
            <img src="${thumbSrc}" alt="${collection.name}">
            <div class="collection-count">${collection.videos.length} видео</div>
          </div>
          <div class="collection-info">
            <h3 class="collection-title">${collection.name}</h3>
            <p class="collection-desc">${collection.description || 'Описание отсутствует'}</p>
            <div class="collection-meta">
              <span>Создана: ${collection.created}</span>
              <span><i class="fas fa-video"></i> ${collection.videos.length}</span>
            </div>
          </div>
        `;
        
        collectionCard.addEventListener('click', () => openCollection(collection.id));
        collectionsContainer.appendChild(collectionCard);
      });
    }
    
    // Открытие коллекции
    function openCollection(collectionId) {
      const collection = collections.find(c => c.id === collectionId);
      if (!collection) return;
      
      // Здесь можно реализовать просмотр содержимого коллекции
      alert(`Коллекция: ${collection.name}\nКоличество видео: ${collection.videos.length}`);
    }
    
    // Инициализация 3D просмотра
    function init3DViewer() {
      const canvas = document.getElementById('nade-canvas');
      const ctx = canvas.getContext('2d');
      
      // Очищаем canvas
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      
      // Рисуем простую траекторию гранаты
      ctx.beginPath();
      ctx.moveTo(100, 350);
      ctx.quadraticCurveTo(400, 50, 700, 250);
      ctx.strokeStyle = '#ff4500';
      ctx.lineWidth = 3;
      ctx.stroke();
      
      // Рисуем точки броска и взрыва
      ctx.beginPath();
      ctx.arc(100, 350, 10, 0, Math.PI * 2);
      ctx.fillStyle = '#4CAF50';
      ctx.fill();
      
      ctx.beginPath();
      ctx.arc(700, 250, 10, 0, Math.PI * 2);
      ctx.fillStyle = '#F44336';
      ctx.fill();
      
      // Добавляем текст
      ctx.font = '16px Arial';
      ctx.fillStyle = 'white';
      ctx.fillText('Точка броска', 50, 340);
      ctx.fillText('Точка взрыва', 650, 240);
      ctx.fillText('Траектория полета', 350, 30);
    }
    
    // Смена вида в 3D просмотре
    function changeView(viewType) {
      showNotification(`Режим просмотра: ${viewType === 'top' ? 'Вид сверху' : viewType === 'side' ? 'Вид сбоку' : 'От первого лица'}`, 'info');
      // Здесь будет код для изменения вида в 3D просмотре
    }
    
    // Отображение панели администратора
    function renderAdminPanel() {
      const adminList = document.getElementById('admin-video-list');
      adminList.innerHTML = '';
      
      if (videos.length === 0) {
        adminList.innerHTML = `
          <div style="text-align: center; padding: 40px;">
            <i class="fas fa-video-slash" style="font-size: 50px; color: #555; margin-bottom: 15px;"></i>
            <h3>Видео не найдены</h3>
            <p>Загрузите первое видео, чтобы управлять им здесь</p>
          </div>
        `;
        return;
      }
      
      videos.forEach(video => {
        const videoItem = document.createElement('div');
        videoItem.className = 'admin-video-item';
        
        videoItem.innerHTML = `
          <div class="admin-video-info">
            <div class="admin-video-title">${video.title}</div>
            <div class="admin-video-meta">
              ${getCategoryName(video.category)} • ${video.map || 'Не указана'} • 
              ${video.date} • Просмотры: ${video.views}
            </div>
          </div>
          <button class="btn btn-danger" onclick="deleteVideo(${video.id})">
            <i class="fas fa-trash"></i> Удалить
          </button>
        `;
        
        adminList.appendChild(videoItem);
      });
    }
    
    // Удаление видео
    function deleteVideo(videoId) {
      if (confirm('Вы уверены, что хотите удалить это видео?')) {
        // Удаляем видео из всех коллекций
        collections.forEach(collection => {
          const index = collection.videos.indexOf(videoId);
          if (index !== -1) {
            collection.videos.splice(index, 1);
          }
        });
        
        // Удаляем из избранного
        const favIndex = favorites.indexOf(videoId);
        if (favIndex !== -1) {
          favorites.splice(favIndex, 1);
          saveFavorites();
        }
        
        // Удаляем само видео
        videos = videos.filter(video => video.id !== videoId);
        saveVideos();
        saveCollections();
        
        if (isAdminMode) {
          renderAdminPanel();
        } else {
          renderVideos();
        }
        
        showNotification('Видео успешно удалено!');
      }
    }
    
    // Получение названия категории
    function getCategoryName(category) {
      const categories = {
        'smoke': 'Дымовая',
        'flash': 'Светошумовая',
        'molotov': 'Зажигательная',
        'he': 'Осколочная'
      };
      return categories[category] || category;
    }
    
    // Открытие видео
    function openVideo(videoId) {
      const video = videos.find(v => v.id === videoId);
      if (video) {
        // Увеличиваем счетчик просмотров
        video.views++;
        saveVideos();
        
        const modalContainer = document.getElementById('modal-video-container');
        modalContainer.innerHTML = '';
        
        if (video.type === 'youtube') {
          // Для YouTube используем iframe
          const iframe = document.createElement('iframe');
          iframe.className = 'modal-video';
          iframe.src = video.src;
          iframe.frameBorder = '0';
          iframe.allowFullscreen = true;
          modalContainer.appendChild(iframe);
        } else {
          // Для загруженных файлов используем video тег
          const videoElement = document.createElement('video');
          videoElement.className = 'modal-video';
          videoElement.controls = true;
          
          const source = document.createElement('source');
          source.src = video.src;
          source.type = 'video/mp4';
          
          videoElement.appendChild(source);
          modalContainer.appendChild(videoElement);
        }
        
        document.getElementById('modal-title').textContent = video.title;
        document.getElementById('modal-category').textContent = `${getCategoryName(video.category)}${video.map ? ' • ' + video.map : ''}`;
        document.getElementById('modal-date').textContent = video.date;
        document.getElementById('modal-description').textContent = video.description || 'Описание отсутствует';
        document.getElementById('modal-views').textContent = video.views;
        document.getElementById('modal-likes').textContent = video.likes;
        
        document.getElementById('video-modal').classList.add('active');
        document.body.style.overflow = 'hidden';
      }
    }
    
    // Закрытие видео
    function closeVideo() {
      document.getElementById('video-modal').classList.remove('active');
      document.body.style.overflow = 'auto';
      
      // Останавливаем видео при закрытии
      const videoContainer = document.getElementById('modal-video-container');
      const videoElement = videoContainer.querySelector('video, iframe');
      
      if (videoElement) {
        if (videoElement.tagName === 'VIDEO') {
          videoElement.pause();
        } else if (videoElement.tagName === 'IFRAME') {
          // Для YouTube iframe меняем src чтобы остановить видео
          const src = videoElement.src;
          videoElement.src = '';
          videoElement.src = src;
        }
      }
    }
    
    // Закрытие модального окна при клике вне его
    document.getElementById('video-modal').addEventListener('click', function(e) {
      if (e.target === this) {
        closeVideo();
      }
    });
    
    // Фильтрация видео по категориям
    document.querySelectorAll('.category-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        // Убираем активный класс у всех кнопок
        document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
        // Добавляем активный класс текуной кнопке
        this.classList.add('active');
        
        const filter = this.getAttribute('data-filter');
        
        document.querySelectorAll('.video-card').forEach(card => {
          if (filter === 'all' || card.getAttribute('data-category') === filter) {
            card.style.display = 'block';
          } else {
            card.style.display = 'none';
          }
        });
      });
    });
    
    // Инициализация модального окна подтверждения
    document.getElementById('confirm-yes').addEventListener('click', function() {
      if (currentCollectionToDelete !== null) {
        deleteCollection(currentCollectionToDelete);
        document.getElementById('confirm-modal').classList.remove('active');
        currentCollectionToDelete = null;
      }
    });
    
    document.getElementById('confirm-no').addEventListener('click', function() {
      document.getElementById('confirm-modal').classList.remove('active');
      currentCollectionToDelete = null;
    });
    
    // Функция подтверждения удаления коллекции
    function confirmDeleteCollection(collectionId) {
      const collection = collections.find(c => c.id === collectionId);
      if (!collection) return;
      
      currentCollectionToDelete = collectionId;
      
      document.getElementById('confirm-title').textContent = `Удаление коллекции`;
      document.getElementById('confirm-message').textContent = 
        `Вы уверены, что хотите удалить коллекцию "${collection.name}"? Это действие нельзя отменить.`;
      
      document.getElementById('confirm-modal').classList.add('active');
    }
    
    // Функция удаления коллекции
    function deleteCollection(collectionId) {
      collections = collections.filter(c => c.id !== collectionId);
      saveCollections();
      renderCollections();
      showNotification('Коллекция успешно удалена');
    }
    
    // Инициализация при загрузке
    document.addEventListener('DOMContentLoaded', function() {
      renderVideos();
      renderCollections();
    });
  </script>
</body>

</html>
